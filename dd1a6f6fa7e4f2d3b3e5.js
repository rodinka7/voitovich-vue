(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{101:function(e,t,r){"use strict";r.r(t),t.default=r.p+"02c30dff8b44c5010aeda04b2efc0a61.png"},120:function(e,t,r){"use strict";var i=r(92);r.n(i).a},121:function(e,t,r){"use strict";var i=r(93);r.n(i).a},122:function(e,t,r){"use strict";var i=r(94);r.n(i).a},132:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return $}));var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reviews-page-component page-component"},[r("div",{staticClass:"page-content"},[r("div",{staticClass:"container"},[e._m(0),e._v(" "),e.editMode?r("div",{staticClass:"form"},[r("reviews-form",{attrs:{review:e.currentReview}})],1):e._e(),e._v(" "),r("ul",{staticClass:"cards"},[r("li",{staticClass:"item empty-card",on:{click:e.addReview}},[r("div",{staticClass:"circle"}),e._v(" "),r("div",{staticClass:"card-title"},[e._v("Добавить отзыв")])]),e._v(" "),e._l(e.reviews,(function(t){return r("li",{key:t.id,class:["item",{editing:t.editMode}]},[r("reviews-card",{attrs:{review:t},on:{edit:function(t){return e.editReview(t)}}})],1)}))],2)])])])};i._withStripped=!0;var n=r(19),s=r.n(n),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-component"},[r("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("card",{attrs:{title:"Редактирование отзыва"}},[r("div",{staticClass:"form-container",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"form-cols"},[r("div",{staticClass:"form-col"},[r("label",{class:["uploader",{active:e.review.preview},{hovered:e.hovered}],style:{backgroundImage:"url("+e.review.preview+")"},on:{dragover:function(t){return t.preventDefault(),e.handleDragover(t)},dragleave:function(t){e.hovered=!1},drop:e.handleChange}}),e._v(" "),r("div",{staticClass:"uploader-btn"},[r("app-button",{attrs:{typeAttr:"file",title:"Добавить фото",styles:"color: #383BCF; background: none;"},on:{change:e.handleChange}})],1)]),e._v(" "),r("div",{staticClass:"form-col"},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-cell"},[r("app-input",{attrs:{title:"Имя автора",errorMessage:e.validation.firstError("review.author")},model:{value:e.review.author,callback:function(t){e.$set(e.review,"author",t)},expression:"review.author"}})],1),e._v(" "),r("div",{staticClass:"form-cell"},[r("app-input",{attrs:{title:"Титул автора",errorMessage:e.validation.firstError("review.occ")},model:{value:e.review.occ,callback:function(t){e.$set(e.review,"occ",t)},expression:"review.occ"}})],1)]),e._v(" "),r("div",{staticClass:"form-row"},[r("app-input",{attrs:{"field-type":"textarea",title:"Отзыв",errorMessage:e.validation.firstError("review.text")},model:{value:e.review.text,callback:function(t){e.$set(e.review,"text",t)},expression:"review.text"}})],1)])]),e._v(" "),r("div",{staticClass:"form-btns"},[r("div",{staticClass:"btn"},[r("app-button",{attrs:{title:"Отмена",plain:""},on:{click:function(t){return e.escape(t)}}})],1),e._v(" "),r("div",{staticClass:"btn"},[r("app-button",{attrs:{title:"Сохранить"},on:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}})],1)])])])],1)])};a._withStripped=!0;var c=r(0),o=r.n(c),v=r(1),l=r.n(v),u=r(72),d=r(71),p=r(70),f=r(7),w=r(43);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={mixins:[w.mixin],validators:{"review.author":function(e){return w.Validator.value(e).required("Не может быть пустым")},"review.occ":function(e){return w.Validator.value(e).required("Не может быть пустым")},"review.text":function(e){return w.Validator.value(e).required("Не может быть пустым")}},props:{typeAttr:String,review:Object},data:function(){return{hovered:!1}},components:{card:u.a,appButton:d.a,appInput:p.default},methods:h(h({},Object(f.b)({addReview:"reviews/add",editReview:"reviews/edit",setMode:"reviews/setMode"})),{},{handleChange:function(e){var t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];e.preventDefault(),this.review.photo=t,this.renderPhoto(t),this.hovered=!1},renderPhoto:function(e){var t=this,r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){t.review.preview=r.result}},handleSubmit:function(){var e=this;return l()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validate();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:if(!e.review.id){t.next=9;break}return t.next=7,e.editReview(e.review);case 7:t.next=11;break;case 9:return t.next=11,e.addReview(e.review);case 11:e.setMode(!1);case 12:case"end":return t.stop()}}),t)})))()},handleDragover:function(e){this.hovered=!0},escape:function(e){e.preventDefault(),this.setMode(!1)}})},O=(r(120),r(18)),_=Object(O.a)(m,a,[],!1,null,"31c69ce2",null);_.options.__file="src/admin/components/reviewsForm/reviewsForm.vue";var g=_.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card",{attrs:{simple:""}},[r("div",{staticClass:"reviews-wrapper"},[r("div",{staticClass:"review-header"},[r("div",{staticClass:"pic"},[r("img",{staticClass:"image",attrs:{src:e.cover}})]),e._v(" "),r("div",{staticClass:"review-title"},[r("div",{staticClass:"title"},[e._v(e._s(e.review.author))]),e._v(" "),r("div",{staticClass:"occ"},[e._v(e._s(e.review.occ))])])]),e._v(" "),r("div",{staticClass:"data"},[r("div",{staticClass:"text"},[r("p",[e._v(e._s(e.review.text))])]),e._v(" "),r("div",{staticClass:"btns"},[r("icon",{attrs:{symbol:"pencil",title:"Править"},on:{click:e.edit}}),e._v(" "),r("icon",{attrs:{symbol:"cross",title:"Удалить"},on:{click:function(t){return e.removeReview(e.review.id)}}})],1)])])])};j._withStripped=!0;var y=r(73),C=r(6);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R={props:{review:Object},components:{card:u.a,icon:y.default},computed:{cover:function(){return"".concat(C.BASE_URL,"/").concat(this.review.photo)}},methods:P(P({},Object(f.b)({removeReview:"reviews/delete"})),{},{edit:function(){this.review.editMode=!0,this.$emit("edit",this.review)}})},k=(r(121),Object(O.a)(R,j,[],!1,null,"03991fb2",null));function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}k.options.__file="src/admin/components/reviewsCard/reviewsCard.vue";var S={data:function(){return{currentReview:{preview:"../".concat(r(101).default),author:"",occ:"",text:""}}},components:{reviewsForm:g,reviewsCard:k.exports},computed:E({},Object(f.c)("reviews",{reviews:function(e){return e.data},editMode:function(e){return e.editMode}})),methods:E(E({},Object(f.b)({fetchReviews:"reviews/fetch",setMode:"reviews/setMode"})),{},{editReview:function(e){this.currentReview=E({},e),this.currentReview.preview="".concat(C.BASE_URL,"/").concat(this.currentReview.photo),this.setMode(!0)},addReview:function(){this.currentReview={preview:"../".concat(r(101).default),author:"",occ:"",text:""},this.setMode(!0)}}),created:function(){this.fetchReviews()}},M=(r(122),Object(O.a)(S,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[this._v('\n                      Блок "Отзывы"\n                  ')])])}],!1,null,"2c7c3bd3",null));M.options.__file="src/admin/pages/reviews/reviews.vue";var $=M.exports},6:function(e){e.exports=JSON.parse('{"REG_URL":"https://webdev-api.loftschool.com/register","BASE_URL":"https://webdev-api.loftschool.com"}')},92:function(e,t,r){},93:function(e,t,r){},94:function(e,t,r){}}]);